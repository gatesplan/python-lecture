"""
p183 3개 더해서 3의 배수면서 최댓값 찾기 알고리즘

문제:
- 배열에서 3개의 수를 선택
- 합이 3의 배수인 경우 중 최댓값 찾기

알고리즘:
- 재귀적으로 깊이 3까지 탐색 (조합 선택)
- 각 깊이에서 다음 인덱스를 선택하며 탐색
- 깊이 3에 도달하면 합이 3의 배수인지 확인하고 최댓값 갱신
"""

A = [0, 1, 2, 7, 9, 10, 15, 16]
ans = 0

def f(k, s, j):
    """
    재귀 함수로 조합 탐색

    Parameters:
    - k: 지금까지 탐색한 인덱스
    - s: 지금까지의 숫자 합
    - j: 지금까지 선택한 숫자 개수 (재귀 깊이)
    """
    # 종료 조건: 3개를 선택했을 때
    if j == 3:
        # s가 지금까지의 합이므로 3의 배수면 최댓값 갱신
        if (s % 3) == 0:
            global ans
            ans = max(ans, s)
        return

    # 아직 최종 깊이(j==3)까지 도달하지 않았으면
    # 깊이를 깊게 해 가며 k의 이후 인덱스 재귀 탐색
    for i in range(k+1, len(A)):
        f(i, s + A[i], j + 1)

    return

# 시작: k=-1 (첫 선택은 인덱스 0부터), s=0, j=0
f(-1, 0, 0)
print(ans)

# 예상 결과: 0 + 9 + 15 = 24 (3의 배수 중 최대)
